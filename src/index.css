@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Critical: Box-sizing for all elements to prevent overflow */
  *, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  
  * {
    @apply border-gray-700;
  }
  
  /* Base font size for rem calculations - 16px default */
  html {
    scroll-behavior: smooth;
    font-size: 16px; /* Base for rem units */
    overflow-x: hidden;
    width: 100%;
    max-width: 100vw;
  }
  
  /* Responsive font size scaling */
  @media (min-width: 480px) {
    html {
      font-size: 16px;
    }
  }
  
  @media (min-width: 768px) {
    html {
      font-size: 16px;
    }
  }
  
  @media (min-width: 1440px) {
    html {
      font-size: 18px; /* Slightly larger on large screens */
    }
  }
  
  @media (min-width: 1920px) {
    html {
      font-size: 20px; /* Larger on ultra-wide screens */
    }
  }
  
  body {
    @apply bg-black text-white antialiased;
    font-family: 'Inter', system-ui, sans-serif;
    /* Prevent horizontal scroll - critical for mobile/desktop switching */
    overflow-x: hidden;
    width: 100%;
    max-width: 100vw;
    position: relative;
  }
  
  /* Ensure all containers respect viewport width */
  #root {
    width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
    position: relative;
  }
  
  /* Ensure images and media don't overflow */
  img, video, iframe, embed, object {
    max-width: 100%;
    height: auto;
    display: block;
  }
  
  /* Prevent all sections and containers from overflowing */
  section, article, main, div, header, footer, nav {
    max-width: 100%;
    overflow-x: hidden;
  }
}

@layer components {
  .glass-effect {
    @apply bg-black/40 backdrop-blur-md border border-primary-bright-green/20;
  }
  
  .glass-card {
    @apply glass-effect rounded-lg p-4 md:p-5 lg:p-6 shadow-lg;
  }
  
  .gradient-text {
    @apply bg-gradient-to-r from-primary-bright-green via-primary-neon-green to-primary-bright-green bg-clip-text text-transparent;
  }
  
  .glow-effect {
    @apply shadow-[0_0_20px_rgba(0,255,0,0.3)];
  }
  
  .glow-effect-strong {
    @apply shadow-[0_0_30px_rgba(0,255,0,0.5)];
  }
  
  /* Responsive container utility */
  .container-responsive {
    width: 100%;
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem; /* 16px */
    padding-right: 1rem; /* 16px */
  }
  
  @media (min-width: 480px) {
    .container-responsive {
      padding-left: 1.5rem; /* 24px */
      padding-right: 1.5rem; /* 24px */
    }
  }
  
  @media (min-width: 768px) {
    .container-responsive {
      padding-left: 2rem; /* 32px */
      padding-right: 2rem; /* 32px */
    }
  }
  
  @media (min-width: 1024px) {
    .container-responsive {
      padding-left: 2.5rem; /* 40px */
      padding-right: 2.5rem; /* 40px */
    }
  }
  
  @media (min-width: 1440px) {
    .container-responsive {
      max-width: 1440px;
    }
  }
  
  @media (min-width: 1920px) {
    .container-responsive {
      max-width: 1600px; /* Constrain ultra-wide screens */
    }
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  /* Prevent content from breaking on ultra-wide screens */
  .max-w-ultra {
    max-width: 1600px;
  }
}

/* Global fixes to prevent layout breaks when switching views */
/* Critical: Force overflow-x hidden on all elements */
html {
  overflow-x: hidden !important;
  width: 100% !important;
  max-width: 100vw !important;
}

body {
  overflow-x: hidden !important;
  width: 100% !important;
  max-width: 100vw !important;
  position: relative;
}

#root {
  overflow-x: hidden !important;
  width: 100% !important;
  max-width: 100vw !important;
  position: relative;
}

/* Mobile-specific fixes to prevent overlapping */
@media (max-width: 479px) {
  /* Ensure proper spacing on very small screens */
  body {
    overflow-x: hidden;
  }
  
  /* Prevent text overflow */
  h1, h2, h3, h4, h5, h6 {
    word-wrap: break-word;
    overflow-wrap: break-word;
    max-width: 100%;
  }
  
  /* Ensure buttons and links don't overflow */
  button, a, .btn {
    max-width: 100%;
    box-sizing: border-box;
  }
  
  /* Prevent container overflow */
  section, div, article {
    max-width: 100%;
    overflow-x: hidden;
  }
}

/* Mobile breakpoint (480px) */
@media (min-width: 480px) and (max-width: 767px) {
  /* Improved spacing for small tablets */
  .glass-card {
    padding: 1rem 1.25rem;
  }
}

/* Tablet breakpoint (768px) */
@media (min-width: 768px) and (max-width: 1023px) {
  /* Tablet-specific adjustments */
  .glass-card {
    padding: 1.25rem 1.5rem;
  }
}

/* Desktop breakpoint (1024px+) */
@media (min-width: 1024px) {
  /* Desktop optimizations */
  .glass-card {
    padding: 1.5rem;
  }
}

/* Critical fixes for mobile/desktop view switching */
/* Prevent layout breaks when switching between views */
@media (min-width: 480px) {
  /* Ensure containers adapt properly */
  section, article, main {
    max-width: 100%;
    overflow-x: hidden;
  }
}

@media (min-width: 768px) {
  /* Tablet and above - ensure proper container constraints */
  .container-responsive {
    max-width: 100%;
    overflow-x: hidden;
  }
}

@media (min-width: 1024px) {
  /* Desktop - apply max-width constraints and prevent empty space */
  section > div[class*="max-w"] {
    max-width: 90rem !important;
  }
  
  /* Force containers to respect viewport */
  section, main, article {
    max-width: 100vw;
    overflow-x: hidden;
  }
}

@media (min-width: 1440px) {
  /* Large desktop - maintain constraints */
  section > div[class*="max-w"] {
    max-width: 90rem !important;
  }
}

/* Prevent empty space on desktop when viewed from mobile */
@media (min-width: 1024px) {
  body {
    min-width: 0 !important;
    overflow-x: hidden !important;
  }
  
  #root {
    min-width: 0 !important;
    overflow-x: hidden !important;
  }
  
  main, section {
    min-width: 0 !important;
    overflow-x: hidden !important;
  }
  
  /* Force all containers to respect viewport */
  div[class*="max-w"] {
    max-width: 90rem !important;
  }
}

/* Critical: Force overflow prevention on all viewport sizes */
@media (max-width: 1023px) {
  body, #root, main, section, div {
    overflow-x: hidden !important;
    max-width: 100vw !important;
  }
}
